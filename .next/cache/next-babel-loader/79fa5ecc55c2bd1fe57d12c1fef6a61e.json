{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport 'isomorphic-fetch';\nimport Layout from '../components/Layout';\nimport ChannelGrid from '../components/ChannelGrid';\nimport PodcastListWithClick from '../components/PodcastListWithClick';\nimport Error from './_error';\nimport PodcastPlayer from '../components/PodcastPlayer';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      openPodcast: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openPodcast\", function (event, podcast) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closePodcast\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          channel = _this$props.channel,\n          audioClips = _this$props.audioClips,\n          series = _this$props.series,\n          statusCode = _this$props.statusCode;\n      var openPodcast = this.state.openPodcast;\n\n      if (statusCode !== 200) {\n        return __jsx(Error, {\n          statusCode: statusCode\n        });\n      }\n\n      return __jsx(Layout, {\n        title: channel.title\n      }, __jsx(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(channel.urls.banner_image.original, \")\")\n        },\n        className: \"jsx-2006608453\" + \" \" + \"banner\"\n      }), openPodcast && __jsx(\"div\", {\n        className: \"jsx-2006608453\" + \" \" + \"modal\"\n      }, __jsx(PodcastPlayer, {\n        clip: openPodcast,\n        onClose: this.closePodcast\n      })), __jsx(\"h1\", {\n        className: \"jsx-2006608453\"\n      }, channel.title), series.length > 0 && __jsx(\"div\", {\n        className: \"jsx-2006608453\"\n      }, __jsx(\"h2\", {\n        className: \"jsx-2006608453\"\n      }, \"Series\"), __jsx(ChannelGrid, {\n        channels: series\n      })), __jsx(\"h2\", {\n        className: \"jsx-2006608453\"\n      }, \"Ultimos Podcasts\"), __jsx(PodcastListWithClick, {\n        podcasts: audioClips,\n        onClickPodcast: this.openPodcast\n      }), __jsx(_JSXStyle, {\n        id: \"2006608453\"\n      }, \".banner.jsx-2006608453{width:100%;padding-bottom:25%;background-position:50% 50%;background-size:cover;background-color:#aaa;}h1.jsx-2006608453{font-weight:600;padding:15px;}h2.jsx-2006608453{padding:15px;font-size:1.2em;font-weight:600;margin:0;}.modal.jsx-2006608453{position:fixed;top:0;left:0;right:0;bottom:0;z-index:99999;background:black;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlc6XFxuZXh0anNcXHBvZGNhc3RcXHBhZ2VzXFxjaGFubmVsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9Ga0IsQUFHc0IsQUFPSyxBQUlILEFBTUUsV0FoQkksRUFXSCxFQU1WLENBVk8sS0FXTixPQUNDLENBWFYsQUFJa0IsQ0FYWSxNQW1CbkIsU0FQQSxBQVFLLFNBUGhCLElBWndCLENBb0JMLGlCQUNuQixJQXBCd0Isc0JBQ3hCIiwiZmlsZSI6Ilc6XFxuZXh0anNcXHBvZGNhc3RcXHBhZ2VzXFxjaGFubmVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdpc29tb3JwaGljLWZldGNoJ1xyXG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0J1xyXG5pbXBvcnQgQ2hhbm5lbEdyaWQgZnJvbSAnLi4vY29tcG9uZW50cy9DaGFubmVsR3JpZCdcclxuaW1wb3J0IFBvZGNhc3RMaXN0V2l0aENsaWNrIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdExpc3RXaXRoQ2xpY2snO1xyXG5pbXBvcnQgRXJyb3IgZnJvbSAnLi9fZXJyb3InO1xyXG5pbXBvcnQgUG9kY2FzdFBsYXllciBmcm9tICcuLi9jb21wb25lbnRzL1BvZGNhc3RQbGF5ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG5cclxuICBzdGF0ZSA9IHtcclxuICAgIG9wZW5Qb2RjYXN0OiBudWxsXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZ2V0SW5pdGlhbFByb3BzKHsgcXVlcnksIHJlcyB9KSB7XHJcbiAgICBsZXQgaWRDaGFubmVsID0gcXVlcnkuaWRcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgW3JlcUNoYW5uZWwsIHJlcVNlcmllcywgcmVxQXVkaW9zXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH1gKSxcclxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH0vY2hpbGRfY2hhbm5lbHNgKSxcclxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH0vYXVkaW9fY2xpcHNgKVxyXG4gICAgICBdKVxyXG5cclxuICAgICAgaWYoIHJlcUNoYW5uZWwuc3RhdHVzID49IDQwMCApIHtcclxuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IHJlcUNoYW5uZWwuc3RhdHVzXHJcbiAgICAgICAgcmV0dXJuIHsgY2hhbm5lbDogbnVsbCwgYXVkaW9DbGlwczogbnVsbCwgc2VyaWVzOiBudWxsLCBzdGF0dXNDb2RlOiByZXFDaGFubmVsLnN0YXR1cyB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBkYXRhQ2hhbm5lbCA9IGF3YWl0IHJlcUNoYW5uZWwuanNvbigpXHJcbiAgICAgIGxldCBjaGFubmVsID0gZGF0YUNoYW5uZWwuYm9keS5jaGFubmVsXHJcblxyXG4gICAgICBsZXQgZGF0YUF1ZGlvcyA9IGF3YWl0IHJlcUF1ZGlvcy5qc29uKClcclxuICAgICAgbGV0IGF1ZGlvQ2xpcHMgPSBkYXRhQXVkaW9zLmJvZHkuYXVkaW9fY2xpcHNcclxuXHJcbiAgICAgIGxldCBkYXRhU2VyaWVzID0gYXdhaXQgcmVxU2VyaWVzLmpzb24oKVxyXG4gICAgICBsZXQgc2VyaWVzID0gZGF0YVNlcmllcy5ib2R5LmNoYW5uZWxzXHJcblxyXG4gICAgICByZXR1cm4geyBjaGFubmVsLCBhdWRpb0NsaXBzLCBzZXJpZXMsIHN0YXR1c0NvZGU6IDIwMCB9XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgcmV0dXJuIHsgY2hhbm5lbDogbnVsbCwgYXVkaW9DbGlwczogbnVsbCwgc2VyaWVzOiBudWxsLCBzdGF0dXNDb2RlOiA1MDMgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlblBvZGNhc3QgPSAoZXZlbnQsIHBvZGNhc3QpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBvcGVuUG9kY2FzdDogcG9kY2FzdFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNsb3NlUG9kY2FzdCA9IChldmVudCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe29wZW5Qb2RjYXN0OiBudWxsfSlcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgY2hhbm5lbCwgYXVkaW9DbGlwcywgc2VyaWVzLCBzdGF0dXNDb2RlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge29wZW5Qb2RjYXN0fSAgPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIGlmKCBzdGF0dXNDb2RlICE9PSAyMDAgKSB7XHJcbiAgICAgIHJldHVybiA8RXJyb3Igc3RhdHVzQ29kZT17IHN0YXR1c0NvZGUgfSAvPlxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiA8TGF5b3V0IHRpdGxlPXtjaGFubmVsLnRpdGxlfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiYW5uZXJcIiBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtjaGFubmVsLnVybHMuYmFubmVyX2ltYWdlLm9yaWdpbmFsfSlgIH19IC8+XHJcbiAgICAgIFxyXG4gICAgICB7XHJcbiAgICAgICAgb3BlblBvZGNhc3QgJiYgXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbFwiPlxyXG4gICAgICAgICAgPFBvZGNhc3RQbGF5ZXIgY2xpcD17b3BlblBvZGNhc3R9IG9uQ2xvc2U9e3RoaXMuY2xvc2VQb2RjYXN0fS8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIH1cclxuICAgICAgPGgxPnsgY2hhbm5lbC50aXRsZSB9PC9oMT5cclxuXHJcbiAgICAgIHsgc2VyaWVzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGgyPlNlcmllczwvaDI+XHJcbiAgICAgICAgICA8Q2hhbm5lbEdyaWQgY2hhbm5lbHM9eyBzZXJpZXMgfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICB9XHJcblxyXG4gICAgICA8aDI+VWx0aW1vcyBQb2RjYXN0czwvaDI+XHJcbiAgICAgIDxQb2RjYXN0TGlzdFdpdGhDbGljayBwb2RjYXN0cz17IGF1ZGlvQ2xpcHMgfSBvbkNsaWNrUG9kY2FzdD17dGhpcy5vcGVuUG9kY2FzdH0vPlxyXG5cclxuICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgIC5iYW5uZXIge1xyXG4gICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMjUlO1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogNTAlIDUwJTtcclxuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBoMSB7XHJcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgICAgcGFkZGluZzogMTVweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaDIge1xyXG4gICAgICAgICAgcGFkZGluZzogMTVweDtcclxuICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XHJcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubW9kYWwge1xyXG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICAgICAgei1pbmRleDogOTk5OTk7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvTGF5b3V0PlxyXG4gIH1cclxufSJdfQ== */\\n/*@ sourceURL=W:\\\\\\\\nextjs\\\\\\\\podcast\\\\\\\\pages\\\\\\\\channel.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, res, idChannel, _ref2, _ref3, reqChannel, reqSeries, reqAudios, dataChannel, channel, dataAudios, audioClips, dataSeries, series;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query, res = _ref.res;\n                idChannel = query.id;\n                _context.prev = 2;\n                _context.next = 5;\n                return _Promise.all([fetch(\"https://api.audioboom.com/channels/\".concat(idChannel)), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/child_channels\")), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/audio_clips\"))]);\n\n              case 5:\n                _ref2 = _context.sent;\n                _ref3 = _slicedToArray(_ref2, 3);\n                reqChannel = _ref3[0];\n                reqSeries = _ref3[1];\n                reqAudios = _ref3[2];\n\n                if (!(reqChannel.status >= 400)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                res.statusCode = reqChannel.status;\n                return _context.abrupt(\"return\", {\n                  channel: null,\n                  audioClips: null,\n                  series: null,\n                  statusCode: reqChannel.status\n                });\n\n              case 13:\n                _context.next = 15;\n                return reqChannel.json();\n\n              case 15:\n                dataChannel = _context.sent;\n                channel = dataChannel.body.channel;\n                _context.next = 19;\n                return reqAudios.json();\n\n              case 19:\n                dataAudios = _context.sent;\n                audioClips = dataAudios.body.audio_clips;\n                _context.next = 23;\n                return reqSeries.json();\n\n              case 23:\n                dataSeries = _context.sent;\n                series = dataSeries.body.channels;\n                return _context.abrupt(\"return\", {\n                  channel: channel,\n                  audioClips: audioClips,\n                  series: series,\n                  statusCode: 200\n                });\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](2);\n                return _context.abrupt(\"return\", {\n                  channel: null,\n                  audioClips: null,\n                  series: null,\n                  statusCode: 503\n                });\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 28]]);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["W:/nextjs/podcast/pages/channel.js"],"names":["Layout","ChannelGrid","PodcastListWithClick","Error","PodcastPlayer","openPodcast","event","podcast","preventDefault","setState","props","channel","audioClips","series","statusCode","state","title","backgroundImage","urls","banner_image","original","closePodcast","length","query","res","idChannel","id","all","fetch","reqChannel","reqSeries","reqAudios","status","json","dataChannel","body","dataAudios","audio_clips","dataSeries","channels","React","Component"],"mappings":"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","sourcesContent":["import 'isomorphic-fetch'\r\nimport Layout from '../components/Layout'\r\nimport ChannelGrid from '../components/ChannelGrid'\r\nimport PodcastListWithClick from '../components/PodcastListWithClick';\r\nimport Error from './_error';\r\nimport PodcastPlayer from '../components/PodcastPlayer';\r\n\r\nexport default class extends React.Component {\r\n\r\n  state = {\r\n    openPodcast: null\r\n  }\r\n\r\n  static async getInitialProps({ query, res }) {\r\n    let idChannel = query.id\r\n\r\n    try {\r\n      let [reqChannel, reqSeries, reqAudios] = await Promise.all([\r\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\r\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\r\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\r\n      ])\r\n\r\n      if( reqChannel.status >= 400 ) {\r\n        res.statusCode = reqChannel.status\r\n        return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status }\r\n      }\r\n\r\n      let dataChannel = await reqChannel.json()\r\n      let channel = dataChannel.body.channel\r\n\r\n      let dataAudios = await reqAudios.json()\r\n      let audioClips = dataAudios.body.audio_clips\r\n\r\n      let dataSeries = await reqSeries.json()\r\n      let series = dataSeries.body.channels\r\n\r\n      return { channel, audioClips, series, statusCode: 200 }\r\n    } catch(e) {\r\n      return { channel: null, audioClips: null, series: null, statusCode: 503 }\r\n    }\r\n  }\r\n\r\n  openPodcast = (event, podcast) => {\r\n    event.preventDefault()\r\n    this.setState({\r\n      openPodcast: podcast\r\n    })\r\n  }\r\n\r\n  closePodcast = (event) => {\r\n    event.preventDefault();\r\n    this.setState({openPodcast: null})\r\n  }\r\n\r\n  render() {\r\n    const { channel, audioClips, series, statusCode } = this.props;\r\n    const {openPodcast}  = this.state;\r\n\r\n    if( statusCode !== 200 ) {\r\n      return <Error statusCode={ statusCode } />\r\n    }\r\n\r\n    return <Layout title={channel.title}>\r\n      <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\r\n      \r\n      {\r\n        openPodcast && \r\n        <div className=\"modal\">\r\n          <PodcastPlayer clip={openPodcast} onClose={this.closePodcast}/>\r\n        </div>\r\n      }\r\n      <h1>{ channel.title }</h1>\r\n\r\n      { series.length > 0 &&\r\n        <div>\r\n          <h2>Series</h2>\r\n          <ChannelGrid channels={ series } />\r\n        </div>\r\n      }\r\n\r\n      <h2>Ultimos Podcasts</h2>\r\n      <PodcastListWithClick podcasts={ audioClips } onClickPodcast={this.openPodcast}/>\r\n\r\n      <style jsx>{`\r\n        .banner {\r\n          width: 100%;\r\n          padding-bottom: 25%;\r\n          background-position: 50% 50%;\r\n          background-size: cover;\r\n          background-color: #aaa;\r\n        }\r\n        h1 {\r\n          font-weight: 600;\r\n          padding: 15px;\r\n        }\r\n        h2 {\r\n          padding: 15px;\r\n          font-size: 1.2em;\r\n          font-weight: 600;\r\n          margin: 0;\r\n        }\r\n        .modal {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          z-index: 99999;\r\n          background: black;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}